/*******************************************************************************
********************************************************************************
********************************************************************************
***	   itaca-ng-filters														 
***    Copyright (C) 2016-2018   Chroma Italy Hotels srl	 
***                                                                          
***    This program is free software: you can redistribute it and/or modify  
***    it under the terms of the GNU General Public License as published by  
***    the Free Software Foundation, either version 3 of the License, or     
***    (at your option) any later version.                                   
***                                                                          
***    This program is distributed in the hope that it will be useful,       
***    but WITHOUT ANY WARRANTY; without even the implied warranty of        
***    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         
***    GNU General Public License for more details.                          
***                                                                          
***    You should have received a copy of the GNU General Public License     
***    along with this program.  If not, see <http://www.gnu.org/licenses/>. 
********************************************************************************
********************************************************************************
*******************************************************************************/
!function(){"use strict";angular.module("itaca.filters",["ngMaterial","itaca.utils","itaca.services","isoCurrency"])}(),function(){"use strict";angular.module("itaca.filters").filter("abs",function(){return function(t){return Math.abs(t)}})}(),function(){"use strict";function t(a,o){return function(t,e,n){var r=null;if(t){r="<span>";var i=t.type||"PRICE",u=_.isNil(t.finalAmount)?t.initialAmount:t.finalAmount;if(!u&&n)return null;u=u||0,e&&t.initialAmount&&("PRICE"==i&&t.initialAmount>u?r+='<small class="text-gray-light text-striked">'+o(t.initialAmount)+"</small>&nbsp;":"PERCENTAGE"==i&&t.initialAmount<u&&(r+='<small class="text-gray-light text-striked">'+t.initialAmount+"%</small>&nbsp;")),r+="<span>","PRICE"==i?r+=o(u):"PERCENTAGE"==i&&(r+=u+"%"),r+="</span></span>"}return a.trustAsHtml(r)}}t.$inject=["$sce","chCurrencyFilter"],angular.module("itaca.filters").filter("chAmount",t)}(),function(){"use strict";function t(e){return function(t){return e.beautifyCardPan(t)}}t.$inject=["ReservationUtils"],angular.module("itaca.filters").filter("beautifyCard",t)}(),function(){"use strict";angular.module("itaca.filters").filter("capitalize",function(){return function(t,e){var n=e?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return t?t.replace(n,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}):""}})}(),function(){"use strict";angular.module("itaca.filters").filter("ceil",function(){return function(t){return Math.ceil(t)}})}(),function(){"use strict";function t(o,c,s,l){var t=function(t,n,e){e=e||l.defaultCurrency||"EUR",n=n||s.current.iso||"EUR";var r,i=c.getCurrencyByCode(n);_.isNil(i)&&(i={iso:"EUR",symbol:"€",rate:1,fraction:2}),r=i.symbol?"$"==i.symbol&&"USD"!=n?i.symbol+n:"¥"==i.symbol&&"JPY"!=n?i.symbol+n:i.symbol:n;var u=1;if(n!=e){var a=s.getExchangeForCurrencyCached(e);a?u=_.find(a.rates,function(t,e){return e==n}):s.getExchangeForCurrency(e)}return t*=u,o("currency")(t,r,i.fraction)};return t.$stateful=!0,t}t.$inject=["$filter","iso4217","Currency","AppOptions"],angular.module("itaca.filters").filter("chCurrency",t)}(),function(){"use strict";angular.module("itaca.filters").filter("float",function(){return function(t,e){return parseFloat(t).toFixed(angular.isNumber(e)?e:2)}})}(),function(){"use strict";angular.module("itaca.filters").filter("floor",function(){return function(t){return Math.floor(t)}})}(),function(){"use strict";function t(i,u,a){return function(t,e,n){if(n)n=Number(n);else if(a.hotel&&a.hotel.addressInfo&&a.hotel.addressInfo.timeZoneId){var r=moment.tz.zone(a.hotel.addressInfo.timeZoneId);n=r?60*r.offset(Date.now()):a.defaultOffset}else n=a.defaultOffset;return i(t,e,u.secondsToOffsetString(n))}}t.$inject=["offsetDateFilter","DateUtils","AppOptions"],angular.module("itaca.filters").filter("hotelDate",t)}(),function(){"use strict";function t(e){return function(t){return e.maskCardPan(t)}}t.$inject=["ReservationUtils"],angular.module("itaca.filters").filter("maskCard",t)}(),function(){"use strict";angular.module("itaca.filters").filter("mask",function(){return function(t){return t.replace(/.(?=.{4,}$)/g,"*")}})}(),function(){"use strict";function t(r,i,u){return function(t,e,n){return n=Number(n||u.defaultOffset),r(t,e,i.secondsToOffsetString(n))}}t.$inject=["dateFilter","DateUtils","AppOptions"],angular.module("itaca.filters").filter("offsetDate",t)}(),function(){"use strict";angular.module("itaca.filters").filter("round",function(){return function(t){return Math.round(t)}})}(),function(){"use strict";angular.module("itaca.filters").filter("timeDiff",function(){return function(t,e,n,r){if(e=e||new Date,r){var i=moment(t).diff(e);return Math.ceil(moment.duration(i).as(n))}return moment(t).diff(e,n)}})}(),function(){"use strict";angular.module("itaca.filters").filter("timeLeft",function(){return function(t,e,n,r){if(r){var i=moment.duration(moment(t).diff(moment())).as(e);return moment.duration(Math.ceil(i),e).humanize(n)}return moment.duration(moment(t).diff(moment(),e),e).humanize(n)}})}(),function(){"use strict";function t(e){return function(){var t=[].splice.call(arguments,1,1)[0];return e(t).apply(null,arguments)}}t.$inject=["$filter"],angular.module("itaca.filters").filter("useFilter",t)}(),function(){"use strict";function t(n){return function(t,e){return n(t,e,"UTC")}}t.$inject=["dateFilter"],angular.module("itaca.filters").filter("utcDate",t)}(),function(){"use strict";function t(n){return function(t,e){return n(moment(t).utcOffset(0,!0),e)}}t.$inject=["amTimeAgoFilter"],angular.module("itaca.filters").filter("utcTimeAgo",t)}(),function(){"use strict";function t(r,i,u){return function(t){var e=null,n=null;if(t&&t.unit){switch(t.count=t.count||0,n=i.instant(["date.hour","date.hours","date.day","date.days","common.night","common.nights","date.week","date.weeks","date.month","date.months","date.year","date.years","common.unit","common.units"]),e=t.count+" ",t.unit){case"CURRENCY":e=u(t.count);break;case"PERCENTAGE":e=t.count.toFixed(2)+"%";break;case"HOURS":e+=1==t.count?n["date.hour"]:n["date.hours"];break;case"DAYS":e+=1==t.count?n["date.day"]:n["date.days"];break;case"NIGHTS":e+=1==t.count?n["common.night"]:n["common.nights"];break;case"WEEKS":e+=1==t.count?n["date.week"]:n["date.weeks"];break;case"MONTHS":e+=1==t.count?n["date.month"]:n["date.months"];break;case"YEARS":e+=1==t.count?n["date.year"]:n["date.years"]}return r.trustAsHtml(e)}}}t.$inject=["$sce","$translate","chCurrencyFilter"],angular.module("itaca.filters").filter("chValue",t)}();